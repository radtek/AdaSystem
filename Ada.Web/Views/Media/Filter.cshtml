@using Ada.Core.Infrastructure
@using Ada.Services.Admin
@using Ada.Services.Resource
@model Ada.Core.Domain.Resource.MediaType
@{
    var tags = EngineContext.Current.Resolve<IMediaTagService>().GetTags();
    var adpositions = Model.AdPositions.Select(d => new SelectListItem() { Text = d.Name, Value = d.Name });
    var fieldService = EngineContext.Current.Resolve<IFieldService>();
    var areas = fieldService.GetFieldsByKey("Area").Select(d => new SelectListItem { Text = d.Text, Value = d.Value });
}
<div class="ibox-content m-b-sm border-bottom">
    <form id="searchFrm">
        <div class="row">
            @Html.AntiForgeryToken()
            <div class="col-sm-12">
                <div class="form-group">
                    <label class="control-label">媒体分类</label>
                    <div class="row">
                        @foreach (var item in tags)
                        {
                            <div class="col-md-1 col-xs-6">
                                <div class="checkbox checkbox-success checkbox-inline">
                                    <input type="checkbox" name="MediaTagIds" value="@item.Id" id="@item.Id">
                                    <label for="@item.Id">@item.TagName</label>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>

            <div class="col-sm-1">
                <div class="form-group m-t-xl">
                    <select class="form-control" name="AdPositionName" id="AdPositionName">
                        <option value="">广告位</option>
                        @foreach (var item in adpositions)
                        {
                            <option value="@item.Value">@item.Text</option>
                        }
                    </select>
                </div>
            </div>
            <div class="col-sm-11">
                <div class="form-group">
                    <label class="control-label">价格区间 <small class="text-muted">(注：请先选择广告位，再选择区间)</small></label>
                    <input type="text" id="SellPriceRange" name="SellPriceRange" value="" />
                </div>
            </div>
        </div>


        <div class="ibox collapsed">
            <div class="ibox-title no-borders">
                
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <span class="text-muted font-bold">更多筛选条件</span> <i class="fa fa-chevron-up"></i>
                    </a>

                </div>
            </div>
            <div class="ibox-content no-borders">
                <div class="row">
                    <div class="col-sm-5">
                        <div class="form-group">
                            <label class="control-label">平均浏览数</label>
                            <input type="text" id="AvgReadNumRange" name="AvgReadNumRange" value="" />
                        </div>
                    </div>
                    <div class="col-sm-6 col-sm-offset-1">
                        <div class="form-group">
                            <label class="control-label">粉丝数</label>
                            <input type="text" id="FansNumRange" name="FansNumRange" value="" />
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label">平均点赞数</label>
                            <div class="input-daterange input-group">
                                <input type="text" name="LikesNumMin" value="" class="form-control" />
                                <span class="input-group-addon">至</span>
                                <div class="input-group">
                                    <input type="text" name="LikesNumMax" value="" class="form-control" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-primary" onclick="searchTable();">
                                            确定
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label">平均评论数</label>
                            <div class="input-daterange input-group">
                                <input type="text" name="CommentNumMin" value="" class="form-control" />
                                <span class="input-group-addon">至</span>
                                <div class="input-group">
                                    <input type="text" name="CommentNumMax" value="" class="form-control" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-primary" onclick="searchTable();">
                                            确定
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label">平均转发数</label>
                            <div class="input-daterange input-group">
                                <input type="text" name="TransmitNumMin" value="" class="form-control" />
                                <span class="input-group-addon">至</span>
                                <div class="input-group">
                                    <input type="text" name="TransmitNumMax" value="" class="form-control" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-primary" onclick="searchTable();">
                                            确定
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label">发布总数</label>
                            <div class="input-daterange input-group">
                                <input type="text" name="PostNumMin" value="" class="form-control" />
                                <span class="input-group-addon">至</span>
                                <div class="input-group">
                                    <input type="text" name="PostNumMax" value="" class="form-control" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-primary" onclick="searchTable();">
                                            确定
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="ibox-footer">
                <button type="button" class="btn btn-warning btn-outline" onclick="resetFilter();">
                    <i class="fa fa-repeat"></i> 重置筛选条件
                </button>
            </div>
        </div>
    </form>
</div>




<div class="row">
    <div class="col-lg-12">
        <div class="ibox">
            <div class="ibox-content">
                <table id="table"></table>
            </div>
        </div>
    </div>
</div>
<div id="toolbar">
    <div class="form-inline" role="form">
        <div class="form-group">
            @if (Model.CallIndex == "weixin")
            {
                <select name="MediaName" class="form-control" id="Areas">
                    <option value="">不限区域</option>
                    @foreach (var item in areas)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                </select>
            }
            else
            {
                <select name="Areas" class="form-control" id="Areas">
                    <option value="">不限区域</option>
                    @foreach (var item in areas)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                </select>
            }

        </div>

    </div>
</div>
