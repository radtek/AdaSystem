@using Ada.Core.Infrastructure
@using Ada.Services.Admin
@using Ada.Services.Resource
@model Ada.Core.Domain.Resource.MediaType
@{
    var tags = EngineContext.Current.Resolve<IMediaTagService>().GetTags();
    var adpositions = Model.AdPositions.Select(d => new SelectListItem() { Text = d.Name, Value = d.Name });
    var fieldService = EngineContext.Current.Resolve<IFieldService>();
    var areas = fieldService.GetFieldsByKey("Area").Select(d => new SelectListItem { Text = d.Text, Value = d.Value });
}

<form id="searchFrm">
    <div class="ibox-content m-b-sm border-bottom">
        <div class="row">
            @Html.AntiForgeryToken()
            <div class="col-sm-12">
                <div class="form-group">
                    <label class="control-label">媒体分类</label>
                    <div class="row">
                        @foreach (var item in tags)
                        {
                            <div class="col-md-1 col-xs-6">
                                <div class="checkbox checkbox-success checkbox-inline">
                                    <input type="checkbox" name="MediaTagIds" value="@item.Id" id="@item.Id">
                                    <label for="@item.Id">@item.TagName</label>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="form-group">
                    <label class="control-label">价格区间 </label><small class="text-muted"> (注：请先选择广告位，再选择区间)</small>
                    <div class="row">
                        <div class="col-md-1 m-b-sm">
                            <select class="form-control" name="AdPositionName" id="AdPositionName">
                                <option value="">广告位</option>
                                @foreach (var item in adpositions)
                                {
                                    <option value="@item.Value">@item.Text</option>
                                }
                            </select>
                        </div>
                        <div class="col-md-6">
                            <ul class="ul-labelauty">
                                <li><input type="radio" name="priceradio" data-labelauty="50元以下" value="-50"></li>
                                <li><input type="radio" name="priceradio" data-labelauty="50-100元" value="50-100"></li>
                                <li><input type="radio" name="priceradio" data-labelauty="100-200元" value="100-200"></li>
                                <li><input type="radio" name="priceradio" data-labelauty="200-500元" value="200-500"></li>
                                <li><input type="radio" name="priceradio" data-labelauty="500-1000元" value="500-1000"></li>
                                <li><input type="radio" name="priceradio" data-labelauty="1000-3000元" value="1000-3000"></li>
                                <li><input type="radio" name="priceradio" data-labelauty="3000元以上" value="3000-"></li>
                            </ul>
                        </div>
                        <div class="col-md-2">
                            <div class="input-daterange input-group">
                                <input type="text" name="SellPriceStart" id="PriceStart" value="" class="form-control" />
                                <span class="input-group-addon">至</span>
                                <div class="input-group">
                                    <input type="text" name="SellPriceEnd" id="PriceEnd" value="" class="form-control" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-primary btn-outline" onclick="searchTable();">
                                            确定
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="form-group" id="fans">
                    <label class="control-label">粉丝数</label>
                    <div class="row">
                        <div class="col-md-6">
                            <ul class="ul-labelauty">
                                <li><input type="radio" name="radio" data-labelauty="1万以下" data-str="1万以下" value="-1"></li>
                                <li><input type="radio" name="radio" data-labelauty="1-5万" data-str="1-5万" value="1-5"></li>
                                <li><input type="radio" name="radio" data-labelauty="5-10万" data-str="5-10万" value="5-10"></li>
                                <li><input type="radio" name="radio" data-labelauty="10-20万" data-str="10-20万" value="10-20"></li>
                                <li><input type="radio" name="radio" data-labelauty="20-40万" data-str="20-40万" value="20-40"></li>
                                <li><input type="radio" name="radio" data-labelauty="40-80万" data-str="40-80万" value="40-80"></li>
                                <li><input type="radio" name="radio" data-labelauty="80-120万" data-str="80-120万" value="80-120"></li>
                                <li><input type="radio" name="radio" data-labelauty="120-200万" data-str="120-200万" value="120-200"></li>
                                <li><input type="radio" name="radio" data-labelauty="200万以上" data-str="200万以上" value="200-"></li>
                            </ul>
                        </div>
                        <div class="col-md-2">
                            <div class="input-daterange input-group">
                                <input type="text" name="FansNumStart" id="FansNumStart" value="" class="form-control" />
                                <span class="input-group-addon">至</span>
                                <div class="input-group">
                                    <input type="text" name="FansNumEnd" id="FansNumEnd" value="" class="form-control" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-primary btn-outline" onclick="searchTable();">
                                            确定
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ibox collapsed">
            <div class="ibox-title">
                @if (Model.CallIndex == "weixin" || Model.CallIndex == "sinablog" || Model.CallIndex == "douyin")
                {
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <span class="text-muted font-bold">更多筛选条件</span> <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                }
            </div>
            <div class="ibox-content no-borders">
                <div class="row">

                    @*<div class="col-sm-5">
                            <div class="form-group">
                                <label class="control-label">平均浏览数</label>
                                <input type="text" id="AvgReadNumRange" name="AvgReadNumRange" value=""/>
                            </div>
                        </div>*@
                    @if (Model.CallIndex == "weixin")
                    {
                        @Html.Partial("FilterWeiXin")
                    }
                    @if (Model.CallIndex == "sinablog")
                    {
                        @Html.Partial("FilterBlog")
                    }
                    @if (Model.CallIndex == "douyin")
                    {
                        @Html.Partial("FilterDouYin")
                    }
                </div>

            </div>
            <div class="ibox-footer  no-borders">
                @*<div class="filters inline">
                    
                </div>*@
                
                <button type="button" class="btn btn-danger btn-outline" onclick="resetFilter();">
                    <i class="fa fa-trash-o"></i> 清空筛选
                </button>
                <button type="button" class="btn btn-success btn-outline" data-toggle="modal" data-target="#searchModal">
                    <i class="fa fa-search"></i> 批量查询
                </button>
            </div>
            <div class="modal inmodal" id="searchModal" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content animated bounceInRight">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                            <i class="fa fa-search modal-icon"></i>
                            <h4 class="modal-title">批量查找媒体</h4>
                            <small class="font-bold">注：输入媒体信息时，请确保一行一个</small>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <textarea class="form-control" placeholder="请输入 @Model.TypeName 信息名称或ID" rows="15" cols="3" id="MediaBatch"></textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                            <button type="button" class="btn btn-primary" onclick="searchTable();$('#searchModal').modal('hide');">查找</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    
</form>




<div class="row">
    <div class="col-lg-12">
        <div class="ibox">
            <div class="ibox-content">
                <table id="table"></table>
            </div>
        </div>
    </div>
</div>
<div id="toolbar">
    <div class="form-inline" role="form">
        <div class="form-group">
            @if (Model.CallIndex == "weixin")
            {
                <select name="MediaName" class="form-control" id="Areas">
                    <option value="">不限区域</option>
                    @foreach (var item in areas)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                </select>
            }
            else
            {
                <select name="Areas" class="form-control" id="Areas">
                    <option value="">不限区域</option>
                    @foreach (var item in areas)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                </select>
            }
            
        </div>

    </div>
</div>
